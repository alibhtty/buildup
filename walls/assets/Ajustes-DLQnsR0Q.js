import{r as n,j as e,L as N,B as R,C as D,E as H,F,G as E}from"./index-BKZJ9Os_.js";const M="_userTable_1jw58_41",O="_miCuenta_1jw58_49",$="_inactiveSession_1jw58_57",L="_iniciarSesion_1jw58_60",U="_userName_1jw58_65",G="_faqContainer_1jw58_85",V="_details_1jw58_109",W="_expandIcon_1jw58_124",K="_faqTitle_1jw58_137",J="_summary_1jw58_143",Q="_faqContent_1jw58_184",X="_avisoIcon_1jw58_201",Y="_iconSection_1jw58_206",Z="_profileIcon_1jw58_212",ee="_iconOption_1jw58_220",te="_iconSelector_1jw58_228",ae="_profileSection_1jw58_243",se="_profilePic_1jw58_249",ne="_avatarSelector_1jw58_262",oe="_avatarActions_1jw58_273",ie="_actionButtonGuardar_1jw58_280",ce="_actionButtonDescartar_1jw58_284",re="_avatarOption_1jw58_293",t={userTable:M,miCuenta:O,inactiveSession:$,iniciarSesion:L,userName:U,faqContainer:G,details:V,expandIcon:W,faqTitle:K,summary:J,faqContent:Q,avisoIcon:X,iconSection:Y,profileIcon:Z,iconOption:ee,iconSelector:te,profileSection:ae,profilePic:se,avatarSelector:ne,avatarActions:oe,actionButtonGuardar:ie,actionButtonDescartar:ce,avatarOption:re},T=""+new URL("img-init-w-lt7qUmmT.png",import.meta.url).href,le=()=>{const[g,m]=n.useState([]),[_,f]=n.useState(0),[h,a]=n.useState(!1),[d,u]=n.useState(null),[b,w]=n.useState(!0),r=async()=>{if("caches"in window){const s=await caches.keys();let p=0;const o=(await Promise.all(s.map(async l=>{const i=await caches.open(l),j=await i.keys();return(await Promise.all(j.map(async v=>{const B=await i.match(v);if(B){const q=await B.clone().blob(),P=q.size;return p+=P,{url:v.url,blobUrl:URL.createObjectURL(q),size:P}}return null}))).filter(Boolean)}))).flat().map(l=>{let i=Math.round(l.size/1024);const j=i<1024?`${i} KB`:`${Math.round(i/1024)} MB`;return{...l,sizeLabel:j}});o.sort((l,i)=>i.size-l.size),m(o),f(Math.round(p/1024/1024))}},x=async()=>{if("caches"in window){const s=await caches.keys();await Promise.all(s.map(p=>caches.delete(p))),m([]),f(0)}};n.useEffect(()=>{r()},[]);const A=s=>{u(s),w(!1)},C=()=>{u(null),w(!0)},I=()=>{a(!h)},k=s=>{s.target.src=T};return e.jsxs("div",{style:{padding:"20px",backgroundColor:"#222",borderRadius:"1em",position:"relative",overflow:"hidden",marginBottom:"8em"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,bottom:0,width:"35%",backgroundImage:"url(/image/app/delete-cache.png)",backgroundSize:"cover",maxHeight:"20vh",backgroundPosition:"center",opacity:.5,zIndex:0}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx("h3",{style:{color:"#fff"},children:"Almacenamiento:"}),e.jsxs("button",{onClick:x,style:{marginBottom:"1em",marginTop:"1.5em",padding:"12px 20px",backgroundColor:"#570f0f",color:"#ff4c4c",fontWeight:"600",border:"none",borderRadius:"50px",cursor:"pointer",transition:"background-color 0.3s"},onMouseEnter:s=>s.target.style.backgroundColor="#402727",onMouseLeave:s=>s.target.style.backgroundColor="#570f0f",children:["Borrar ",_,"MB en Caché"]}),e.jsxs("h4",{style:{color:"#999",fontSize:"10px",cursor:"pointer",marginBottom:"1em"},children:[" El espacio en caché se utiliza ",e.jsx("br",{})," mejorar para la fluidez de la app."]})," ",e.jsx("br",{}),e.jsxs("div",{children:[e.jsxs("h4",{style:{color:"#eee",fontSize:"12px",cursor:"pointer"},onClick:I,children:[h?"Ocultar":"Ver"," archivos en caché"]}),h&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",transition:"all 0.3s ease"},children:g.length>0?g.map((s,p)=>e.jsxs("div",{style:{position:"relative",borderRadius:8,backgroundColor:"#222",width:"100%",paddingBottom:"100%",overflow:"hidden",cursor:"pointer"},onClick:()=>A(s),children:[e.jsx("img",{src:s.blobUrl,alt:`img ${p}`,onError:k,style:{position:"absolute",top:0,left:0,fontSize:"8px",width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",opacity:.3}}),e.jsx("div",{style:{position:"absolute",display:"flex",width:"100%",justifyContent:"center",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#f1f1f1",fontWeight:"bold",fontSize:"11px",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"},children:s.sizeLabel})]},p)):e.jsx("p",{style:{color:"#999",minWidth:"4em",width:"100%",fontSize:"12px",textAlign:"center",marginTop:"1.5em"},children:"Sin archivos en caché"})})]}),d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,overflow:"hidden"},onClick:C,children:e.jsx("img",{src:d.blobUrl||T,alt:"img",style:{maxWidth:"60%",maxHeight:"60%",borderRadius:"8px"}})}),e.jsx("style",{children:`
            @media (min-width: 1024px) {
              div[style*="grid-template-columns"] {
                grid-template-columns: repeat(8, 1fr) !important;
              }
            }
          `})]})]})},y=["./image/app/users/00.jpg","./image/app/users/01.jpg","./image/app/users/02.jpg","./image/app/users/03.jpg","./image/app/users/04.jpg","./image/app/users/05.jpg"],de=["./image/app/icons/icon-1.png","./image/app/icons/icon-2.png","./image/app/icons/icon-3.png"],ue=({title:g,content:m})=>{const _=n.useRef(null),f=h=>{h.preventDefault();const a=_.current,d=a.querySelector("summary"),u=a.querySelector(`.${t.faqContent}`),b=d.querySelector(`.${t.expandIcon}`);a.open?(a.style.height=`${a.offsetHeight}px`,a.animate({height:[`${a.offsetHeight}px`,`${d.offsetHeight}px`]},{duration:400,easing:"ease-out"}).onfinish=()=>{a.open=!1,a.style.height="",b.style.transform="rotate(0deg)"}):(a.style.height=`${a.offsetHeight}px`,a.open=!0,window.requestAnimationFrame(()=>{a.animate({height:[`${a.offsetHeight}px`,`${d.offsetHeight+u.offsetHeight}px`]},{duration:400,easing:"ease-out"}).onfinish=()=>{a.style.height="",b.style.transform="rotate(90deg)"}}))};return e.jsxs("details",{ref:_,onClick:f,className:t.details,children:[e.jsxs("summary",{className:t.summary,children:[e.jsx("span",{className:t.faqTitle,children:g}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.expandIcon,width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 6l6 6-6 6"})]})]}),e.jsx("div",{className:t.faqContent,children:m})]})},he=()=>{const[g,m]=n.useState("Anónimo"),[_,f]=n.useState(""),[h,a]=n.useState(y[0]),[d,u]=n.useState(!1),[b,w]=n.useState(!1),[r,x]=n.useState(null),[A,C]=n.useState(de[0]);n.useState(!1),n.useState(null),n.useEffect(()=>{const c=async()=>{const l=R(),i=D(),j=l.currentUser;if(j){w(!0);const S=await H(F(i,"users",j.uid));if(S.exists()){const v=S.data();m(v.name),f(v.registrationDate),a(v.profilePic||y[0])}}else{w(!1);const S=localStorage.getItem("avatar");a(S||y[0]),m("Anónimo")}},o=localStorage.getItem("appIcon");o&&C(o),c()},[]);const I=()=>{u(!d)},k=c=>{x(c)},s=async()=>{const o=R().currentUser;if(o&&r){const l=D(),i=F(l,"users",o.uid);await E(i,{profilePic:r}),a(r),x(null),u(!1)}else!o&&r&&(localStorage.setItem("avatar",r),a(r),x(null),u(!1))},p=()=>{x(null),u(!1)},z=[{title:"Cómo instalar en iOS",content:"Presiona en 'Compartir' y luego 'Añadir a pantalla de Inicio'. Puedes cambiar el icono manualmente seleccionando un nuevo icono y siguiendo los pasos que se indican."},{title:"Cómo instalar en Android",content:"Presiona en 'Compartir' y luego 'Añadir al Home'. Puedes cambiar el icono manualmente seleccionando un nuevo icono y siguiendo los pasos que se indican."}];return e.jsxs("div",{className:t.faqContainer,children:[e.jsxs("div",{className:t.profileSection,children:[e.jsx("img",{src:r||h,alt:"Avatar",className:t.profilePic,onClick:I}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.avatarSelector,children:y.map((c,o)=>e.jsx("img",{src:c,alt:`Avatar ${o+1}`,className:t.avatarOption,onClick:()=>k(c)},o))}),r&&e.jsxs("div",{className:t.avatarActions,children:[e.jsx("button",{className:t.actionButtonGuardar,onClick:s,children:"Guardar"}),e.jsx("button",{className:t.actionButtonDescartar,onClick:p,children:"Descartar"})]})]})]}),e.jsxs("section",{className:t.userTable,children:[e.jsxs(N,{className:t.miCuenta,to:"/profile",children:[" Nick",e.jsx("div",{className:t.userName,children:g})]}),b?e.jsxs("div",{className:t.miCuenta,children:["Sesión",e.jsx("div",{className:t.userName,children:"activa"})]}):e.jsx(N,{className:t.miCuenta,to:"/login",style:{backgroundImage:"linear-gradient(to right, rgba(68,193,81,.3) 0%, rgba(53,80,53,.8) 20%, rgba(145, 255, 202,.45) )"},children:e.jsx("div",{className:t.iniciarSesion,children:"Iniciar Sesión"})}),e.jsxs(N,{className:t.miCuenta,to:"/4b",children:[" Versión",e.jsx("div",{className:t.userName,children:"4.1"})]})]}),z.map((c,o)=>e.jsx(ue,{title:c.title,content:c.content},o)),e.jsx(le,{})]})};export{he as default};
//# sourceMappingURL=Ajustes-DLQnsR0Q.js.map
