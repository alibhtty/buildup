import{j as s,r as a,D as g}from"./index-xWVz3D8M.js";const N=()=>s.jsxs("nav",{className:"bottom-nav",children:[s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-home"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-search"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-plus"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-commenting"})}),s.jsx("a",{className:"navbar-brand",href:"/",children:s.jsx("i",{className:"fa fa-user"})})]});let d=[];function v(n){const[u,l]=a.useState(!1),r=a.useMemo(()=>new IntersectionObserver(([e])=>{l(e.isIntersecting),e.isIntersecting&&d.forEach(t=>{t!==n.current?t.pause():t.play()})}),[]);return a.useEffect(()=>(d.push(n.current),r.observe(n.current),()=>{d=d.filter(e=>e!==n.current),r.disconnect()}),[n,r]),u}const b="/assets/mixtape-B4dAbi3V.svg",y=({index:n,songName:u,songimg:l,songCut:r,author:e,authorLink:t})=>{const c=a.useRef(),m=v(c),[p,o]=a.useState(!0),[f,x]=a.useState(!1);a.useEffect(()=>{const i=c.current,h=()=>{m?(i.play(),o(!1)):(i.pause(),o(!0))};return i.addEventListener("canplay",h),()=>{i.removeEventListener("canplay",h)}},[m]),a.useEffect(()=>()=>{const i=c.current;i&&(i.pause(),o(!0))},[]);const j=()=>{c.current.paused?(c.current.play(),o(!1),x(!0)):(c.current.pause(),o(!0),x(!1))};return s.jsxs("div",{className:"slider-children",children:[s.jsx("div",{className:`background-image ${f?"playing":""}`,style:{backgroundImage:`url(${l})`}}),s.jsx("img",{src:l,alt:u,className:`song-image ${f?"playing":""}`}),s.jsx("audio",{className:"audio",ref:c,id:n,children:s.jsx("source",{src:r,type:"audio/mp3"})}),s.jsx("div",{className:"audio-overlay",onClick:j,children:p&&s.jsx("img",{src:b,alt:"Play",className:"play-icon"})}),s.jsxs("div",{className:"audio-content",children:[s.jsxs("p",{className:"m-0",children:["@",e]}),s.jsxs("p",{children:["Post by ",s.jsxs("a",{href:t,children:[e," "]})," en Mixtape"]})]})]})};function E(){const[n,u]=a.useState([]),[l,r]=a.useState(!1);return a.useEffect(()=>{u(g),r(!0)},[]),s.jsxs("main",{children:[s.jsx("div",{className:"slider-container",children:l&&n.length>0?s.jsx("div",{children:n.map((e,t)=>s.jsx(y,{index:e.index,songName:e.songName,songimg:e.songimg,songCut:e.songCut,author:e.author,authorLink:e.authorLink,miniatura:e.miniatura},t))}):s.jsx("div",{children:"Loading..."})}),s.jsx(N,{})]})}export{E as default};
//# sourceMappingURL=App-DEfm96Nr.js.map
