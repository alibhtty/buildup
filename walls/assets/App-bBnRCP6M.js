import{j as e,r as a,D as g}from"./index-BKZJ9Os_.js";const N=()=>e.jsxs("nav",{className:"bottom-nav",children:[e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-home"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-commenting"})}),e.jsx("a",{className:"navbar-brand",href:"/",children:e.jsx("i",{className:"fa fa-user"})})]});let d=[];function v(n){const[u,l]=a.useState(!1),r=a.useMemo(()=>new IntersectionObserver(([s])=>{l(s.isIntersecting),s.isIntersecting&&d.forEach(t=>{t!==n.current?t.pause():t.play()})}),[]);return a.useEffect(()=>(d.push(n.current),r.observe(n.current),()=>{d=d.filter(s=>s!==n.current),r.disconnect()}),[n,r]),u}const b=""+new URL("mixtape-B4dAbi3V.svg",import.meta.url).href,y=({index:n,songName:u,songimg:l,songCut:r,author:s,authorLink:t})=>{const c=a.useRef(),m=v(c),[p,o]=a.useState(!0),[f,x]=a.useState(!1);a.useEffect(()=>{const i=c.current,h=()=>{m?(i.play(),o(!1)):(i.pause(),o(!0))};return i.addEventListener("canplay",h),()=>{i.removeEventListener("canplay",h)}},[m]),a.useEffect(()=>()=>{const i=c.current;i&&(i.pause(),o(!0))},[]);const j=()=>{c.current.paused?(c.current.play(),o(!1),x(!0)):(c.current.pause(),o(!0),x(!1))};return e.jsxs("div",{className:"slider-children",children:[e.jsx("div",{className:`background-image ${f?"playing":""}`,style:{backgroundImage:`url(${l})`}}),e.jsx("img",{src:l,alt:u,className:`song-image ${f?"playing":""}`}),e.jsx("audio",{className:"audio",ref:c,id:n,children:e.jsx("source",{src:r,type:"audio/mp3"})}),e.jsx("div",{className:"audio-overlay",onClick:j,children:p&&e.jsx("img",{src:b,alt:"Play",className:"play-icon"})}),e.jsxs("div",{className:"audio-content",children:[e.jsxs("p",{className:"m-0",children:["@",s]}),e.jsxs("p",{children:["Post by ",e.jsxs("a",{href:t,children:[s," "]})," en Mixtape"]})]})]})};function E(){const[n,u]=a.useState([]),[l,r]=a.useState(!1);return a.useEffect(()=>{u(g),r(!0)},[]),e.jsxs("main",{children:[e.jsx("div",{className:"slider-container",children:l&&n.length>0?e.jsx("div",{children:n.map((s,t)=>e.jsx(y,{index:s.index,songName:s.songName,songimg:s.songimg,songCut:s.songCut,author:s.author,authorLink:s.authorLink,miniatura:s.miniatura},t))}):e.jsx("div",{children:"Loading..."})}),e.jsx(N,{})]})}export{E as default};
//# sourceMappingURL=App-bBnRCP6M.js.map
