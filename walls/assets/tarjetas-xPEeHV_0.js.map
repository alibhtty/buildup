{"version":3,"file":"tarjetas-xPEeHV_0.js","sources":["../../src/component/tarjetas/utils.js","../../src/component/tarjetas/tarjetas.jsx"],"sourcesContent":["// These two are just helpers, they curate spring data, values that are later being interpolated into css\nexport const to = (i) => ({\n  x: 0,\n  y: i * -4,\n  scale: .8,\n  rot: -10 + Math.random() * 20,\n  delay: i * 100\n})  /* scale  1  */\n\nexport const from = (_i) => ({\n  x: 0,\n  rot: 0,\n  scale: 1.5,\n  y: -1000\n})\n\n// This is being used down there in the view, it interpolates rotation and scale into a css transform\nexport const trans = (r, s) => `perspective(1500px) rotateX(0deg) rotateY(${r / 10}deg) rotateZ(${r}deg) scale(${s})`\n","import React, {\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useSprings, animated, to as interpolate } from \"@react-spring/web\";\nimport { useDrag } from \"@use-gesture/react\";\nimport * as utils from \"./utils\";\nimport tarjetasData from \"../../data/tarjetas.json\";\nimport useAnimations from \"../../hooks/useAnimations\";\nimport styles from \"./tarjetas.module.css\";\n\nfunction Tarjetas() {\n  const cards = tarjetasData || []; // Asegúrate de que tarjetasData esté bien importado\n\n  if (cards.length === 0) {\n    return <p>No se encontraron tarjetas.</p>;\n  }\n\n  const [gone] = useState(() => new Set());\n\n  const windowSize = useMemo(\n    () => ({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    }),\n    []\n  );\n\n  const toFn = useCallback((i) => utils.to(i), []);\n  const fromFn = useCallback((i) => utils.from(i), []);\n\n  const [props, api] = useSprings(cards.length, (i) => ({\n    ...toFn(i),\n    from: fromFn(i),\n  }));\n\n  const bind = useDrag(\n    ({\n      args: [index],\n      active,\n      movement: [mx, my],\n      direction: [xDir, yDir],\n      velocity: [vx, vy],\n      touches,\n    }) => {\n      const trigger = Math.abs(vx) > 0.2 || Math.abs(vy) > 0.2 || touches === 3;\n\n      if (!active && trigger) gone.add(index);\n\n      api.start((i) => {\n        if (index !== i) return;\n        const isGone = gone.has(index);\n        const x = isGone ? (200 + windowSize.width) * xDir : active ? mx : 0;\n        const y = isGone ? (200 + windowSize.height) * yDir : active ? my : 0;\n        const rot = mx / 100 + (isGone ? xDir * 10 * vx : 0);\n        const scale = active ? 1.1 : 1;\n\n        return {\n          x,\n          y,\n          rot,\n          scale,\n          delay: undefined,\n          config: {\n            friction: 50,\n            tension: active ? 800 : isGone ? 200 : 500,\n          },\n        };\n      });\n\n      if (!active && gone.size === cards.length) {\n        setTimeout(() => {\n          gone.clear();\n          api.start((i) => toFn(i));\n        }, 600);\n      }\n    }\n  );\n\n  const ref = useRef();\n\n  useEffect(() => {\n    const handleMouseLeave = () => {\n      ref.current.dispatchEvent(new MouseEvent(\"mouseup\"));\n    };\n\n    const element = ref.current;\n    element.addEventListener(\"mouseleave\", handleMouseLeave);\n    element.addEventListener(\"mouseout\", handleMouseLeave);\n\n    return () => {\n      element.removeEventListener(\"mouseleave\", handleMouseLeave);\n      element.removeEventListener(\"mouseout\", handleMouseLeave);\n    };\n  }, []);\n\n  useAnimations();\n\n  return (\n    <motion.div\n      id=\"photo-deck\"\n      ref={ref}\n      initial={{ scale: 1.04 }}\n      animate={{ scale: 1 }}\n      transition={{ duration: 0.8, ease: \"easeInOut\" }}\n      className={styles.photoDeck}\n    >\n      {props.map(({ x, y, rot, scale }, i) => (\n        <animated.div key={i} style={{ x, y }} className={styles.photoDeckDiv}>\n          <animated.div\n            {...bind(i)}\n            style={{\n              touchAction: \"none\",\n              position: \"relative\",\n              transform: interpolate([rot, scale], utils.trans),\n              backgroundImage: `url(${cards[i].url})`,\n              backgroundSize: \"cover\",\n              backgroundPosition: \"center\",\n              width: cards[i].orientation === \"portrait\" ? \"244px\" : \"366px\",\n              height: cards[i].orientation === \"portrait\" ? \"366px\" : \"244px\",\n              border: \"solid 1px #141414\",\n            }}\n            className={styles.photoDeckInnerDiv}\n          >\n            <button\n              onClick={() => {\n                if (cards[i].link) {\n                  window.location.assign(cards[i].link);\n                }\n              }}\n              className={styles.cardButton}\n            >\n              VISITAR\n            </button>\n          </animated.div>\n        </animated.div>\n      ))}\n    </motion.div>\n  );\n}\n\nexport default Tarjetas;\n"],"names":["to","i","from","_i","trans","r","Tarjetas","cards","tarjetasData","jsx","gone","useState","windowSize","useMemo","toFn","useCallback","utils.to","fromFn","utils.from","props","api","useSprings","bind","useDrag","index","active","mx","my","xDir","yDir","vx","vy","touches","trigger","isGone","x","y","rot","ref","useRef","useEffect","handleMouseLeave","element","useAnimations","motion","styles","scale","animated","interpolate","utils.trans"],"mappings":"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"}